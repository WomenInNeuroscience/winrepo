{% extends "base.html" %}

{% load static %}

{% block css %}
	{{ block.super }}
	<link rel="stylesheet" type="text/css" href="{% static 'profiles/css/home.css' %}" />
{% endblock css%}

{% block header_scripts %}
	 {{ block.super }}
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
		google.charts.load('current', {'packages':['corechart', 'geochart'], 'mapsApiKey': 'AIzaSyCoD-FXcgIKxspIjalcutPYjaSK1B1WmXc'});
		google.charts.setOnLoadCallback(init);
		google.charts.setOnLoadCallback(drawRegionsMap);

		function drawPieChart(myID,val1,label,color1) {
			var percentVal = val1/{{ nb_all }};
			var labelVal = percentVal.toString();
			var data = new google.visualization.DataTable();
			data.addColumn('string','Position');
			data.addColumn('number','Entries in Repository');
			data.addColumn({type:'string', role:'annotation'});
			data.addRows([
				[label, val1, labelVal],
				['Rest', {{ nb_all }} -  val1,''],
			]);

			var options = {
				colors: ['#cdcdcd','#cdcdcd'],
				fontName: 'Open Sans',
				fontSize: 14,
				chartArea:{left:'12%',top:0,width:'75%',height:'100%'},
				width: 200,
				legend: 'none',
				pieSliceText: 'none',
				pieHole: 0.6,
				enableInteractivity: false,
				slices: [{color: color1,textStyle: {color:'#555555',fontName: 'Open Sans',fontSize: 18}},
				 {textStyle: {color:'#ffffff',fontName: 'Open Sans',fontSize: 1}}]
			};

			var Piechart = new google.visualization.PieChart(document.getElementById(myID));

			Piechart.draw(data, options);
		}
		function init() {
	    drawPieChart('chartPhD',{{ nb_students }},'PhD students','red');
			drawPieChart('chartPostDoc',{{ nb_postdoc }},'Post-doc','blue');
			drawPieChart('chartSenior',{{ nb_senior }},'Senior','green');
			drawPieChart('chartOther',{{ nb_other }},'Other','#888888');
		}

		function drawRegionsMap() {
				var data = google.visualization.arrayToDataTable([['Country', 'Total']{% for entry in country_stats %}, ['{{ entry.country__name }}', {{ entry.total }}]{% endfor %}], false);

			var options = {
				colorAxis: { colors: ['#db9daf', '#cc063e'] },
			};

			var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

			chart.draw(data, options);
		}
	</script>
{% endblock header_scripts %}

{% block nav-home-classes %}active{% endblock nav-home-classes %}

{% block content %}
<div class="container col-12 text-center" id="front-page">
	<img src="{% static 'profiles/images/banner2.png' %}" class="img-fluid rounded w-100" alt="Responsive image">
</div>

<div class="container col-12" id="text-container">
	<div class="row m-4">
		<div class="col-md-4 offset-md-4 text-center">
			<h1 class="headtitle"> <span class="women">Women</span> in Neuroscience </h1>
		</div>
	</div>
	<div class="row">
		<div  class="col-md-8 offset-md-2 intro-text">
			<p class="text-justify">Female neuroscientists are still under-represented in various neuroscience
				conferences (<a href="https://biaswatchneuro.com/">BiasWatchNeuro</a>). Identifying
				suitable female speakers for conferences can be a challenge, despite some <a href="{% url 'faq' %}">great initiatives</a>.
				The aim of this project is to promote female neuroscientists through a repository
				and recommendations provided by senior researchers.</p>
		</div>
	</div>
	<div class="d-flex flex-wrap justify-content-center">
		<div class="p-2">
			<a href="{% url 'profiles:index' %}" class="btn header-btn">View Repository</a>
		</div>
		<div class="p-2">
			<a href="{% url 'profiles:create' %}" class="btn header-btn">Create profile</a>
		</div>
	</div>
</div>

<div class="row" id="list-stats">
	<div class="col-12 text-center" id="entries-container">
		<p id="entrie-number"> {{ nb_all }} </p>
		<p>entries in repository. </p>
	</div>
</div>

<div class="d-flex flex-wrap justify-content-center align-items-start" id="chart-stats">
	<div class="p-2 text-center donutTab">
		<table>
			<tr>
				<td class="donutCell">
					<div id="chartPhD" class="donutDiv"></div>
					<div class="centerLabel"> {{ pct_students }}%</div>
				</td>
			</tr>
		</table>
		<a href="{% url 'profiles:index' %}" class="PhDtext">PhD</a>
		<p class="Positiontext">{{ nb_students }} profiles</p>
	</div>
	<div class="p-2 text-center donutTab">
		<table>
			<tr>
				<td class="donutCell">
					<div id="chartPostDoc" class="donutDiv"></div>
					<div class="centerLabel">{{ pct_postdoc }}%</div>
				</td>
			</tr>
		</table>
		<a href="{% url 'profiles:index' %}" class="PostDoctext">Post-doc</a>
		<p class="Positiontext">{{ nb_postdoc }} profiles</p>
	</div>
	<div class="p-2 text-center donutTab">
		<table>
			<tr>
				<td class="donutCell">
					<div id="chartSenior" class="donutDiv"></div>
					<div class="centerLabel">{{ pct_senior }}%</div>
				</td>
			</tr>
		</table>
		<a href="{% url 'profiles:index' %}" class="Seniortext">Senior</a>
		<p class="Positiontext">{{ nb_senior }} profiles</p>
	</div>
	<div class="p-2 text-center donutTab">
		<table>
			<tr>
				<td class="donutCell">
					<div id="chartOther" class="donutDiv"></div>
					<div class="centerLabel">{{ pct_other }}%</div>
				</td>
			</tr>
		</table>
		<a href="{% url 'profiles:index' %}" class="Othertext">Other</a>
		<p class="Positiontext">{{ nb_other }} profiles</p>
	</div>
</div>

<div class="row" id="country-stats">
	<div class="col-12 col-md-8 offset-md-2" id="map-container">
		<div id="regions_div"></div>
	</div>
</div>
{% endblock content %}
