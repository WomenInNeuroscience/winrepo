{% extends "base.html" %}

{% load static %}

{% block css %}
	{{ block.super }}
	<link rel="stylesheet" type="text/css" href="{% static 'profiles/css/home.css' %}" />
{% endblock css%}

{% block header_scripts %}
	 {{ block.super }}
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
		google.charts.load('current', {'packages':['corechart', 'geochart'], 'mapsApiKey': 'AIzaSyCoD-FXcgIKxspIjalcutPYjaSK1B1WmXc'});
		google.charts.setOnLoadCallback(drawPieChart);
		google.charts.setOnLoadCallback(drawRegionsMap);

		function drawPieChart() {
			var data = google.visualization.arrayToDataTable([
				['Position', 'Entries in Repository'],
				['PhD', {{ nb_students }} ],
				['Postdoc', {{ nb_postdoc }} ],
				['Senior', {{ nb_senior }} ],
				['Other', {{ nb_other }} ],
			]);

			var options = {
				title: 'Career stages represented',
				colors: ['#000f96','#089600','#440096','555555'],
				fontName: 'Lato',
				fontSize: 14,
				height: 300,
				legend: {position:'right',textStyle:{fontSize: 14}},
				titleTextStyle: {color: '#555555',fontName: 'Lato',fontSize: 18}
			};

			var pieChart = new google.visualization.PieChart(document.getElementById('piechart'));

			pieChart.draw(data, options);
		}

		function drawRegionsMap() {
				var data = google.visualization.arrayToDataTable([['Country', 'Total']{% for entry in country_stats %}, ['{{ entry.country__name }}', {{ entry.total }}]{% endfor %}], false);

			var options = {
				colorAxis: { colors: ['#db9daf', '#cc063e'] },
			};

			var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

			chart.draw(data, options);
		}
	</script>
{% endblock header_scripts %}

{% block nav-home-classes %}active{% endblock nav-home-classes %}

{% block content %}
<div class="container col-12 text-center" id="front-page">
	<img src="{% static 'profiles/images/banner2.png' %}" class="img-fluid rounded w-100" alt="Responsive image">
</div>

<div class="container col-12" id="text-container">
	<div class="row m-4">
		<div class="col-md-4 offset-md-4 text-center">
			<h1 class="headtitle"> <span class="women">Women</span> in Neuroscience </h1>
		</div>
	</div>
	<div class="row">
		<div  class="col-md-8 offset-md-2 intro-text">
			<p class="text-justify">Female neuroscientists are still under-represented in various neuroscience
				conferences (<a href="https://biaswatchneuro.com/">BiasWatchNeuro</a>). Identifying
				suitable female speakers for conferences can be a challenge, despite some <a href="{% url 'faq' %}">great initiatives</a>.
				The aim of this project is to promote female neuroscientists through a repository
				and recommendations provided by senior researchers.</p>
		</div>
	</div>
	<div class="row m-4">
		<div class="col-md-2 offset-md-4">
			<a href="{% url 'profiles:index' %}" class="btn header-btn m-2">View Repository</a>
		</div>
		<div class="col-md-2">
			<a href="{% url 'profiles:create' %}" class="btn header-btn m-2">Create profile</a>
		</div>
	</div>
</div>

<div class="row" id="list-stats">
	<div class="col-12 col-md-10 offset-md-1" id="entries-container">
		<p id="entrie-number"> {{ nb_all }} </p>
		<p>entries in repository. </p>
	</div>
	<div class="col-12 col-md-10 offset-md-1" id="piechart-container">
		<div id="piechart"></div>
	</div>
	<div class="col-12 col-md-10 offset-md-1" id="map-container">
		<div id="regions_div"></div>
	</div>
</div>
{% endblock content %}
